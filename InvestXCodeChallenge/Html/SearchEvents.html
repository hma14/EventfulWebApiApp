<script src="../MyScripts/datePicker.js"></script>
<br />
<div class="container col-lg-12">
    <!--searching-->
    <div ng-app="app" ng-controller="appController" class="input-form col-sm-4">

        <input placeholder="Location" class="form-control" id="where" type="text" ng-model="loc" />
        <input placeholder="music" class="form-control" id="query" type="text" ng-model="query" />
        <input class="btn btn-md btn-info btn-block" type="button" ng-click="getEvents()" value="Search" /> <br>

    </div>

    <!--calendar-->
    <div class="date-form col-lg-4">
        <div class="control-group">
            <label for="startDate" class="control-label">Start Date</label>
            <div class="controls">
                <div class="input-group">
                    <label for="startDate" class="input-group-addon btn">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </label>
                    <input id="startDate" type="text" class="date-picker form-control" ng-model="startDate" />
                </div>
            </div>

            <label for="endDate" class="control-label">End Date</label>
            <div class="controls">
                <div class="input-group">
                    <label for="endDate" class="input-group-addon btn">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </label>
                    <input id="endDate" type="text" class="date-picker form-control" ng-model="endDate" />
                </div>
            </div>

            <div class="date-form">
                <a class="btn btn-sm btn-info btn-block" href="" ng-click="getEvents()">Query on date range</a>
            </div>
        </div>
    </div>
</div>
<br />
<br />

<!--searching results-->
<div class="col-lg-12">
    <table class="table table-striped table-responsive">

        <thead>
            <tr>
                <th>Title</th>
                <th>Performers</th>
                <th>Image</th>
                <th><a href="" ng-click="sortField='start_time';reverse=!reverse">Start Datetime</a></th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            <!--replacing ng-repeat for pagination purpose-->
            <tr dir-paginate="event in events | itemsPerPage: 10 | orderBy:sortField:reverse" pagination-id="eventpages">
                <td>{{event.title}}</td>
                <td>
                    <ul ng-show="event.performers.performer.length > 0">
                        <li ng-repeat="p in event.performers.performer">{{p.name}}</li>
                    </ul>
                    <ul ng-show="event.performers.performer.length == undined && event.performers.performer != null">
                        <li ng-repeat="p in event.performers">{{p.name}}</li>
                    </ul>
                </td>
                <td><img ng-src="{{event.image.thumb.url}}" /></td>
                <td>{{event.start_time | date: 'yyy-MM-dd HH:mm:ss Z'}}</td>
                <td>{{event.location}}</td>
            </tr>
        </tbody>
    </table>
    <div>
        <!--pagination-->
        <div class="text-center">
            <dir-pagination-controls pagination-id="eventpages" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)" template-url="Html/dirPagination.tpl.html"></dir-pagination-controls>
        </div>
    </div>
</div>
